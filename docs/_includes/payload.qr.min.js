const e=new Promise(e=>{if("loading"!==document.readyState)return e();document.addEventListener("DOMContentLoaded",()=>e(),{once:1})}),t="application/vnd.anecdote.worker",a="application/manifest+json",n="application/manifest+html",s="application/javascript",i="module",c={[t]:i,[i]:s,[a]:"application/json",[n]:"text/html"};!(async function(){const r=e=>fetch(e,{cache:"no-store",credentials:"omit",mode:"cors"});await(async function(){const o=await r("https://anecdote.discoverywritten.com/.well-known/manifest.json"),l=await o.text(),d=JSON.parse(l);await(async function o({meta:{node:l},candidates:d={},resources:u={}}){async function p({strategy:u,uri:p,path:w,type:f}){let m=c[f]??f;const h=new File([await(async function(){let e=null;if("dns"!==u)throw new Error(u);return e=await r(l+p),new Blob([await e.arrayBuffer()],{type:f})})()],w,{type:m}),y=(e,t)=>Object.entries(t).forEach(([t,a])=>e[t]=a);let[k,b]=[null,null];switch(f){default:[kind,b]=["link","href"];break;case t:case a:case i:case s:[kind,b]=["script","src"];break;case n:[kind,b]=["iframe","src"]}const g=document.createElement(kind);switch(f){case t:case a:y(g,{type:m});break;default:y(g,{type:f})}switch(f){case t:k=l+p;break;case n:y(g,{sandbox:"allow-scripts allow-same-origin"});break;case"text/css":y(g,{rel:"stylesheet"})}return k||(k=URL.createObjectURL(h)),g[b]=k,g.id=w,await e,f===n?document.body.appendChild(g):document.head.appendChild(g),(async()=>{switch(f){default:return Promise.resolve(g);case t:return navigator.serviceWorker?.register?.(l+p,{type:m,scope:d.dns});case a:return o(JSON.parse(await h.text()))}})()}for(const e in u){if(!u[e])continue;const t=[];for(const a in d){if(!(a in d))continue;const{[a]:n=e}=u[e],s=d[a]+n,i=p({...u[e],uri:s,path:n,strategy:a});t.push(i)}await Promise.all(t)}})(d)})()})();